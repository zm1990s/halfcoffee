---
layout: post
comments: true
title:  "第一份工作-2014~2015"
date:   2023-3-11 15:14:54
categories: 毕业十年
tags: 毕业十年
typora-root-url: ../../halfcoffee
---

* content
{:toc}
# 第一份工作-2014~2015

在西安这个经济发展一般的地方，IT 圈子也比较小，CCIE 也显得稀有一些，拿到证书之后立竿见影的两个好处有：

- 工资会比其他新入职高个几百

- 没事别人不会来麻烦你

第一个好处是我预料之中的，就和文凭一样，学历高一些公司通常会区别对待。第二个则是预料之外的，而这竟然成为我之后转型的重要机遇。



入职之后前三个月是试用期，通常新手来都是跟着其他前辈去跑项目，当时忘记什么原因，入职两个人，另一个同事被派到了项目上，而我则每天在公司待着，待着也无聊，我继承了之前考 CCIE 的习惯，抱着一腔热血学习 Cisco 安全，最初是用 GNS3 模拟器研究 ASA 防火墙，虚拟机装 ACS 学习 AAA，同时总结写笔记。谁能想到在 2015 年初，技术级别考试就用到了当时学的东西，为我的成绩加分不少。

在我入职一个月后，来了位新同事，曾在惠普工作，后来得知是曾经公司一位前辈推荐进来的，来公司主要做系统，当时我对系统工程师并没有太多了解，能想到的就是装系统配置 Linux 之类的事，大学花了不少时间在 Linux 上，因此对于这类工作不是特别在意，感觉有些"过于简单"。这位同事来公司后和我一样一开始并没有太多工作，于是安装虚拟化，出于好奇跟着他学习 ESXi 虚拟化的安装，当时发现这个真的超简单，半天能学完的东西，最初的时候还对虚拟化没有太全的理解，以为这是一种分布式计算系统，想着多个节点能当成一台机器来处理大规模流量...后来得知虚拟化只是提升资源利用率时，有那么些许失望。

不管最初对于虚拟化的认识是什么样，后来坚持学完了 vCenter 的部署、集群的部署、共享存储的部署，基本入门虚拟化。同时还要感谢当时别人共享的 CCIE-DC 的视频资料， 意外的发现这个课程里有一部分专门讲虚拟化，深入浅出。

在闲暇的时间里，还花了一些时间学习 Cisco Nexus 相关的技术，当时做网络的方向基本就是路由交换、安全和数据中心，Nexus 是数据中心中最重要的内容，Nexus 没有现成的设备可以把玩，于是只能啃视频和文档，VPC、VDC 等技术的细节很多，不过之前还算深度学习过交换机和虚拟化，因此学起来也不是很费力。



三个月很快就过去了，期间可能有一大半的时间就是在公司学习，偶尔去项目上帮个忙，有些理论技术上的积累，没有什么系统性的提升（尤其是对项目的前前后后）。试用期转正比较简单，写一个 PPT 介绍下公司，再总结下之前的工作和未来的计划。还记得当时 HR 听完我的汇报后的评价是，我是唯一一个看过公司网站的人（言外之意很用心），因为有些最新的资质是最近才更新到公司网站的，其他地方并没有。



接着迎来了入职的第一个技术考评，当时公司也在做一些转型，原来都是系统的人参加系统相关的考试，网络的参加网络的考试，2015 年改成所有人都需要参加这两个考试，评测综合能力，就像是上天在帮我一样，试用期的所学全部用上了，最终成绩是两个测试方向我均是全公司第二，作为一个新来的还没有任何工作经验的人，这个成绩让很多人认识了我，也让我得到一次小小的加薪。



2015 年整体来说是收获颇丰的一年，大大小小的项目和测试做过很多，每个都或多或少带来一些改变：

## 某城商行核心 N7K 引擎扩容项目

这个项目的背景可能有些匪夷所思，因为一般核心网络设计一定是各种冗余，竟然还会有设备单引擎的设计？

后来打听了下，原来项目规划的是双机单引擎板，有了双机，单引擎这种额外的冗余显得就没太大必要，但是有次银行做灾备演练时发现竟然没切成功，造成业务中断。返回来查时发现某些汇聚是单线接入到单个核心，并不是像理想的状态双线接到两个核心...

这个问题一时半会儿没办法解决，只能给所有核心设备增加引擎，提升单机的可靠性...

这个项目的难度还是有些高，主要问题在于新购买的引擎软件版本低，已有设备软件版本高，还得先去升级新引擎软件版本，再做扩容，而 Nexus 这种百万级的核心设备基本找不到备件来做降级以及测试验证。于是实施前花了很长时间啃文档，完善实施流程。另外割接时间只有 2 小时，在银行的灾备演练之前进行，如果我的工作完不成，会直接影响后面的灾备演练，一堆人可能都会白来现场。

即使准备的万全，最终还是翻车了，碰到两个坑：

第一个坑是给引擎升级完软件后，发现系统竟然报内存不足，后来看到原来引擎配置了 8G 内存，而新的引擎配置了 4G，新版本的 NXOS 需要 8G 才能跑起来。之前设备采购谁都没想到这个问题...

另一个坑是在做引擎切换时，原来的引擎竟然挂了，起不来了，后来根据日志判断是内存坏掉了，最后没办法只能把新引擎的两个内存条都拔下来换上，最终进行了回退。

后来和公司前辈反馈了问题，根据经验判断是某个年份采购的思科设备均有内存问题，断电重启后内存会挂，后来在一个运营商的项目也碰到了，几年后我和思科的人聊起往事，他也承认了这个事实。

有了前车之鉴，公司 PM 立马加急采购内存，为了防止意外发生，额外采购了 2 条 4G 内存 ，最终证明该来的还会再来，第二次割接时另一台 N7K 的内存也挂掉了...

这个项目工作量并没有多少，但是我一个人独立完成的第一个项目，还记得割接前在监控室几十个人在等待，他们能否早早回家取决于我是否顺利割接，也记得第二天凌晨，出门的时候牛肉面馆已开门，吃个早饭安心的睡了。有辛苦，也有收获、认可和满足。

## 某园区新建项目

介入这个项目时，实际上实施已经有一段时间了，一来项目缺人，二来碰到虚拟化的一些疑难杂症，项目上亟需外援。

开车和 PM、总监、其他小朋友一起到了现场，第一件事就是解燃眉之急，为啥同一批服务器，同一批网络设备，有些服务器网络通，有些不通，找不到任何规律。

已经忘记的排查思路是什么样的，只记得检查过软件配置没问题，然后去测交换机直连服务器时，发现网络通了...

之后一一测试发现，只要直连网络就能通，进而推测是配线架搞的鬼，后来丢给总包，找师傅重做配线架去了。

在这个 Case 里，会发现真实世界的排错并不是独立掌握好一门技术就好，曾经试用期学的虚拟化帮到了我，之前各种实验对我的排错思维敏感度提升也有一些帮助，或者换句话说，知识广和知识深同等重要。

在这之外，项目里基本涵盖了常见的各种思科设备，N7k 当核心，C45xx 做汇聚，无线全家桶，一个项目下来收获不少。

项目里还有一件事让我耿耿于怀，当时总包 PM 是个黝黑的小伙子，很年轻，一开始的时候很是佩服他的胆识，直到他当着我的面，开始质疑我的技术...

也不知道是不是出于年轻人的冲动，我打心底里不想再支持他的项目，后来迟迟没给他一些测试报告，结果闹得不咋愉快。

就像《头脑特工队》里的场景一样，不愉快的记忆有时候反倒印象深刻，如果当时的我不在乎那些评价，或许是另一种结果。

## 某科研院所园区新建项目

刚入司的第一个目标是学习 Cisco 安全，所学知识在这个项目里就用到了，所有安全设备的安装实施由我来负责，核心设备的安装也有我来，过程非常顺利，直到后来，同事重做了我安装的核心设备...

这就需要谈到理论和实践这两个词。

不得不佩服 Cisco 是家伟大的公司，产品设计领先，官方文档也非常好，即使没有什么资源，也可以从官方文档里学到很多知识，和”最佳实践“。

网络的核心是实现端到端连通性，为了保证连通性通常需要各种冗余，从设备内到设备间，随着网络演进出现了一大堆高可用相关的技术，VSS 就是其中一种，后来很多交换机或者其他设备都具备类似 VSS 一样的软堆叠方案。

这种方案在文档中描述很全面，无论是功能还是防脑裂都有详细的文档记录，因此在项目之初我想都没想用了这种架构，这种架构还有个好处就是可以使用 LACP 等链路捆绑技术，链路冗余也可以做的很好。

之后大概一个月听说现场工程师把 VSS 拆了，换成了传统的 STP+VRRP 架构。

有次在公司技术分享会上，谈及这部分的设计，我举手问为什么不使用 VSS，根据文档看能够最大程度提供高可用，保证故障发生后快速切换。技术总监听到这个问题，耐心做了解答，大致记得他说：”经过多年的实践，STP+VRRP 是最可靠稳定的，而 VSS 会碰到切换时间长的问题，造成网络长时间不能恢复“。

后来简单分析过背后的逻辑：STP+VRRP 下始终是两台大脑在同时独立工作；而 VSS 下是单个大脑，另一台即使是热备，大脑切换也需要时间。

这就是理论和实践的差距。往往一个传统的技术，即使配置可能会复杂，也可能有些限制，但是它就是很稳。

多年后我一直记得这个事，几年后还真碰到过 H3C 设备 IRF 脑裂问题，或者设备重启丢配置等问题，没有大脑的设备恢复起来也是异常麻烦...



## 某公司的无线网扩容及改造

这是我做的第一个也是唯一一个无线项目，伴随着无线项目，还有一些遗留的 PIX 防火墙、ASA、专线.

TBC



## 某单位核心网改造及机房搬迁

TBC

## Horizon View POC

因为试用期时学完了 VMware 虚拟化，而当时因为工程师变化（由独立的项目部转为工程师下放到每个业务部），部门里没有其他多余的人来做 VMware 的项目，于是只能由我上，摸石头过河。

在 2015 年一年内，给三个客户做了 Horizon View 的 POC，第一个算是上手，熟悉基本的组件架构，第二个则是做 GPU 虚拟化+ RDSH App，第三个是 GPU+VDI。

在当时 GPU 虚拟化出来时间不长，公司拿到了 NVIDIA Grid K1 及 K2 卡专门用于验证，Horizon 支持 RDSH 及 vGPU 的时间也不是很长，在区域内基本没多少人用

TBC
